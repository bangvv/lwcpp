<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chi Ti·∫øt OOP trong C++</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f4f4;
      color: #333;

    }

    header {
      background: #005b99;
      color: white;
      padding: 20px;
      text-align: center;
    }

    nav {
      background: #003f66;
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 10px 0;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 20px;
      max-width: 960px;
      margin: auto;
      background: white;
    }

    h4 {
      color: #005b99;
    }

    pre {
      background: #eee;
      padding: 10px;
      overflow-x: auto;
    }

    code {
      font-family: Consolas, monospace;
      background: #e0e0e0;
      padding: 2px 4px;
      border-radius: 4px;
    }

    a {
      color: #005b99;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .note {
      font-style: italic;
      color: #555;
    }
  </style>
</head>

<body>
  <header>
    <h1>H·ªçc C++ t·ª´ C∆° B·∫£n ƒë·∫øn N√¢ng Cao</h1>
    <p>Website t·ª± h·ªçc l·∫≠p tr√¨nh C++ mi·ªÖn ph√≠, th·ª±c chi·∫øn, d·ªÖ hi·ªÉu</p>
  </header>

  <nav>
    <a href="cpp-bassic.html">C++ C∆° B·∫£n</a>
    <a href="cpp-advance.html">C++ N√¢ng Cao</a>
    <a href="#stl">STL</a>
    <a href="#build">Build System</a>
    <a href="#du-an">D·ª± √Ån</a>
  </nav>

  <main>

    <section id="memory">
      <h2>Qu·∫£n l√Ω b·ªô nh·ªõ n√¢ng cao</h2>
      <section id="SmartPointer">
        <h3>1. Smart Pointer</h3>
        <ul>
          <li><code>std::unique_ptr</code>: s·ªü h·ªØu ƒë∆°n, kh√¥ng th·ªÉ sao ch√©p.</li>
          <li><code>std::shared_ptr</code>: ƒë·∫øm tham chi·∫øu, nhi·ªÅu ƒë·ªëi t∆∞·ª£ng c√πng s·ªü h·ªØu.</li>
          <li><code>std::weak_ptr</code>: tr√°nh v√≤ng l·∫∑p s·ªü h·ªØu v·ªõi shared_ptr.</li>
        </ul>
        <pre><code>
#include <memory>
std::unique_ptr<int> up = std::make_unique<int>(10);
std::shared_ptr<int> sp1 = std::make_shared<int>(20);
std::shared_ptr<int> sp2 = sp1;
std::weak_ptr<int> wp = sp1;
    </code></pre>
        <div class="note">
          <strong>∆Øu ƒëi·ªÉm:</strong>
          <ul>
            <li>T·ª± ƒë·ªông gi·∫£i ph√≥ng b·ªô nh·ªõ gi√∫p tr√°nh memory leak.</li>
            <li>D·ªÖ qu·∫£n l√Ω v√† an to√†n h∆°n new/delete th·ªß c√¥ng.</li>
          </ul>
          <strong>Nh∆∞·ª£c ƒëi·ªÉm:</strong>
          <ul>
            <li>D·ªÖ g√¢y l·ªói n·∫øu d√πng sai ki·ªÉu (v√≠ d·ª• d√πng shared_ptr kh√¥ng c·∫ßn thi·∫øt).</li>
            <li>C√≥ chi ph√≠ hi·ªáu nƒÉng (ƒë·∫∑c bi·ªát v·ªõi shared_ptr v√¨ qu·∫£n l√Ω ref-count).</li>
          </ul>
          <strong>Khi n√†o n√™n d√πng:</strong>
          <ul>
            <li>D√πng <code>unique_ptr</code>khi b·∫°n ch·∫Øc ch·∫Øn ch·ªâ c·∫ßn m·ªôt owner.</li>
            <li>D√πng <code>shared_ptr</code> khi c·∫ßn chia s·∫ª ownership gi·ªØa nhi·ªÅu ph·∫ßn c·ªßa ch∆∞∆°ng tr√¨nh.</li>
            <li>D√πng <code>weak_ptr</code> ƒë·ªÉ tr√°nh v√≤ng l·∫∑p tham chi·∫øu gi·ªØa c√°c shared_ptr.</li>
          </ul>
        </div>
      </section>
      <section id="raii">
        <h3>2. RAII ‚Äì Resource Acquisition Is Initialization</h3>
        <p>RAII l√† k·ªπ thu·∫≠t ƒë·∫£m b·∫£o t√†i nguy√™n (file, memory...) ƒë∆∞·ª£c c·∫•p ph√°t v√† thu h·ªìi ƒë√∫ng c√°ch b·∫±ng c√°ch g·∫Øn v·ªõi
          v√≤ng ƒë·ªùi object.</p>
        <pre><code>
class FileWrapper {
    FILE* f;
public:
    FileWrapper(const char* name) { f = fopen(name, "r"); }
    ~FileWrapper() { if (f) fclose(f); }
};
    </code></pre>
        <div class="note">
          üîí <strong>L∆∞u √Ω:</strong> RAII ƒë·∫∑c bi·ªát quan tr·ªçng trong C++ v√¨ kh√¥ng c√≥ GC nh∆∞ Java. N√™n d√πng RAII cho m·ªçi
          t√†i nguy√™n nh∆∞ file, lock, socket...
        </div>
      </section>
      <section id="LeakDetector">
        <h3>3. Leak Detector</h3>
        <ul>
          <li><strong>Valgrind</strong>: c√¥ng c·ª• ph√¢n t√≠ch runtime ch·∫°y tr√™n Linux. N√≥ gi√°m s√°t ch∆∞∆°ng tr√¨nh trong qu√°
            tr√¨nh th·ª±c thi ƒë·ªÉ:
            <ul>
              <li>Ph√°t hi·ªán b·ªô nh·ªõ c·∫•p ph√°t m√† kh√¥ng gi·∫£i ph√≥ng (memory leak).</li>
              <li>Truy c·∫≠p ngo√†i v√πng nh·ªõ h·ª£p l·ªá (invalid read/write).</li>
              <li>S·ª≠ d·ª•ng v√πng nh·ªõ ƒë√£ gi·∫£i ph√≥ng (use-after-free).</li>
            </ul>
          </li>
          <li><strong>AddressSanitizer (ASan)</strong>: tr√¨nh ph√¢n t√≠ch th·ªùi gian ch·∫°y ƒë∆∞·ª£c t√≠ch h·ª£p trong compiler nh∆∞
            GCC/Clang.
            <ul>
              <li>Ph√°t hi·ªán l·ªói tr√†n b·ªô ƒë·ªám (buffer overflow), l·ªói truy c·∫≠p use-after-free.</li>
              <li>Nhanh h∆°n Valgrind, ph√π h·ª£p t√≠ch h·ª£p v√†o CI/CD ho·∫∑c debug local nhanh.</li>
              <li>Kh√¥ng c·∫ßn c√†i th√™m tool ngo√†i, ch·ªâ c·∫ßn bi√™n d·ªãch l·∫°i v·ªõi flag <code>-fsanitize=address</code>.</li>
            </ul>
          </li>
        </ul>
        <pre><code>
// D√πng v·ªõi gcc/clang
$ g++ -fsanitize=address -g main.cpp -o app
$ ./app
    </code></pre>
        <div class="note">
          üìå <strong>L∆∞u √Ω:</strong> Trong d·ª± √°n l·ªõn, b·∫°n n√™n ch·∫°y Valgrind ho·∫∑c ASan ƒë·ªãnh k·ª≥ trong CI/CD ƒë·ªÉ ph√°t hi·ªán
          s·ªõm l·ªói b·ªô nh·ªõ kh√≥ debug.
        </div>
      </section>

      <p><a href="cpp-advance.html">‚Üê Quay l·∫°i C++ N√¢ng Cao</a></p>
  </main>
</body>

</html>