<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chi Ti·∫øt OOP trong C++</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f4f4;
      color: #333;

    }

    header {
      background: #005b99;
      color: white;
      padding: 20px;
      text-align: center;
    }

    nav {
      background: #003f66;
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 10px 0;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 20px;
      max-width: 960px;
      margin: auto;
      background: white;
    }

    h4 {
      color: #005b99;
    }

    pre {
      background: #eee;
      padding: 10px;
      overflow-x: auto;
    }

    code {
      font-family: Consolas, monospace;
      background: #e0e0e0;
      padding: 2px 4px;
      border-radius: 4px;
    }

    a {
      color: #005b99;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .note {
      font-style: italic;
      color: #555;
    }
  </style>
</head>

<body>
  <header>
    <h1>H·ªçc C++ t·ª´ C∆° B·∫£n ƒë·∫øn N√¢ng Cao</h1>
    <p>Website t·ª± h·ªçc l·∫≠p tr√¨nh C++ mi·ªÖn ph√≠, th·ª±c chi·∫øn, d·ªÖ hi·ªÉu</p>
  </header>

  <nav>
    <a href="cpp-bassic.html">C++ C∆° B·∫£n</a>
    <a href="cpp-advance.html">C++ N√¢ng Cao</a>
    <a href="#stl">STL</a>
    <a href="#build">Build System</a>
    <a href="#du-an">D·ª± √Ån</a>
  </nav>

  <main>

  <section>
    <h2>C++ Multithreading & Process</h2>
    <h3 id="thread">1. C∆° b·∫£n v·ªÅ Thread</h3>
    <p><code>std::thread</code> d√πng ƒë·ªÉ t·∫°o v√† ch·∫°y lu·ªìng.</p>
    <pre><code>void task() { std::cout << "Hello from thread!\n"; }
std::thread t(task);
t.join(); // ho·∫∑c t.detach();
    </code></pre>
    
    <div class="note">
      üî∏ N√™n g·ªçi <code>join()</code> ho·∫∑c <code>detach()</code> ƒë·ªÉ tr√°nh terminate ch∆∞∆°ng tr√¨nh.
    </div>
  </section>

  <section>
    <h3 id="dbh">2. ƒê·ªìng b·ªô h√≥a: Mutex v√† Condition Variable</h3>
    <pre><code>std::mutex m;
int shared = 0;
void inc() {
  std::lock_guard<std::mutex> lock(m);
  ++shared;
}
    </code></pre>
    <pre><code>std::condition_variable cv;
bool ready = false;
void worker() {
  std::unique_lock<std::mutex> lock(m);
  cv.wait(lock, [] { return ready; });
  // do work
}
    </code></pre>
    
  </section>

  <section>
    <h3 id="Future">3. Future, Promise, Async</h3>
    <p><code>std::promise</code> g·ª≠i d·ªØ li·ªáu t·ª´ thread A sang B, d√πng k√®m <code>std::future</code>.</p>
    <pre><code>std::promise<int> p;
std::future<int> f = p.get_future();
std::thread([&p]{ p.set_value(42); }).detach();
int result = f.get();
    </code></pre>
    
    <p><code>std::async</code> t·∫°o thread v√† t·ª± ƒë·ªông qu·∫£n l√Ω future.</p>
    <pre><code>std::future<int> f = std::async([]{ return 5 + 3; });
int result = f.get();
    </code></pre>
    
  </section>

  <section>
    <h3 id="luuy">4. Khi n√†o n√™n d√πng thread?</h3>
    <ul>
      <li>Th·ª±c thi t√°c v·ª• t·ªën th·ªùi gian (I/O, x·ª≠ l√Ω ·∫£nh, t√≠nh to√°n l·ªõn).</li>
      <li>Song song ho√° c√°c ph·∫ßn ƒë·ªôc l·∫≠p trong ·ª©ng d·ª•ng.</li>
      <li>Gi·ªØ UI responsive (trong GUI ho·∫∑c game).</li>
    </ul>
  </section>

  <section>
    <h3 id="hieunang">5. L∆∞u √Ω v·ªÅ hi·ªáu nƒÉng v√† t√†i nguy√™n</h3>
    <ul>
      <li>Kh√¥ng t·∫°o qu√° nhi·ªÅu thread: gi·ªõi h·∫°n b·ªüi s·ªë core v√† t√†i nguy√™n OS.</li>
      <li>D√πng thread pool (v√≠ d·ª• <code>std::async</code> ho·∫∑c lib thread pool).</li>
      <li>Tr√°nh deadlock b·∫±ng c√°ch lu√¥n lock theo th·ª© t·ª± x√°c ƒë·ªãnh.</li>
    </ul>
  </section>

  <section>
    <h3 id="vande">6. Nh·ªØng v·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p v·ªõi thread</h3>
    <ul>
      <li><strong>Kh√¥ng g·ªçi join/detach</strong>: thread b·ªã "std::terminate" khi h·ªßy.</li>
      <li><strong>Data race</strong>: hai thread truy c·∫≠p chung 1 bi·∫øn kh√¥ng ƒë∆∞·ª£c b·∫£o v·ªá mutex.</li>
      <li><strong>Deadlock</strong>: hai thread lock ch√©o l·∫´n nhau v√† kh√¥ng tho√°t ƒë∆∞·ª£c.</li>
      <li><strong>L·ªói truy c·∫≠p v√πng nh·ªõ sau khi thread k·∫øt th√∫c</strong> (dangling reference).</li>
      <li><strong>Thread leak</strong>: t·∫°o thread li√™n t·ª•c m√† kh√¥ng qu·∫£n l√Ω.</li>
      <li><strong>Kh√¥ng x·ª≠ l√Ω exception trong thread</strong>: thread ch·∫øt √¢m th·∫ßm.</li>
    </ul>
    <div class="note">
      üìå <strong>C√°ch x·ª≠ l√Ω v√† ph√≤ng tr√°nh:</strong>
      <ul>
        <li>D√πng <code>std::lock_guard</code> ho·∫∑c <code>std::unique_lock</code> ƒë·ªÉ ƒë·∫£m b·∫£o mutex lu√¥n ƒë∆∞·ª£c unlock an to√†n.</li>
        <li>Lu√¥n g·ªçi <code>join()</code> ho·∫∑c <code>detach()</code> v·ªõi m·ªói thread ƒë∆∞·ª£c t·∫°o.</li>
        <li>S·ª≠ d·ª•ng <code>try-catch</code> trong thread ƒë·ªÉ b·∫Øt exception v√† x·ª≠ l√Ω.</li>
        <li>D√πng <code>std::atomic</code> n·∫øu ch·ªâ c·∫ßn thay ƒë·ªïi ƒë∆°n gi·∫£n m√† kh√¥ng c·∫ßn mutex.</li>
        <li>Tr√°nh lock nhi·ªÅu mutex c√πng l√∫c, ho·∫∑c lock theo th·ª© t·ª± c·ªë ƒë·ªãnh.</li>
      </ul>
    </div>
  </section>
<section>
    <h3 id="process">7. L√†m vi·ªác v·ªõi Process</h3>
    <ul>
      <li><strong>Process</strong> l√† m·ªôt ch∆∞∆°ng tr√¨nh ƒëang ƒë∆∞·ª£c th·ª±c thi, c√≥ b·ªô nh·ªõ, PID, v√† t√†i nguy√™n ri√™ng bi·ªát.</li>
      <li>Giao ti·∫øp gi·ªØa c√°c process (IPC) th∆∞·ªùng d√πng: <code>pipe</code>, <code>shared memory</code>, <code>message queue</code>, <code>socket</code>.</li>
      <li>D√πng <code>fork()</code> ƒë·ªÉ t·∫°o process con tr√™n Linux.</li>
      <li>D√πng <code>exec()</code> ƒë·ªÉ thay th·∫ø image c·ªßa process hi·ªán t·∫°i b·∫±ng ch∆∞∆°ng tr√¨nh kh√°c.</li>
    </ul>
    <pre><code>pid_t pid = fork();
if (pid == 0) {
  // process con
  execlp("ls", "ls", "-l", nullptr);
} else {
  wait(NULL);
}
    </code></pre>
    
    <div class="note">
      üîπ <strong>L∆∞u √Ω:</strong> M·ªói process c√≥ v√πng nh·ªõ t√°ch bi·ªát, c·∫ßn IPC ƒë·ªÉ trao ƒë·ªïi d·ªØ li·ªáu. D√πng signal ho·∫∑c socket cho th√¥ng b√°o b·∫•t ƒë·ªìng b·ªô.
    </div>
  </section>

  <section>
    <h3 id="sosanh">8. So s√°nh Thread v√† Process</h3>
    <table border="1" cellpadding="6" cellspacing="0">
      <tr><th>Ti√™u ch√≠</th><th>Thread</th><th>Process</th></tr>
      <tr><td>ƒê·ªãnh nghƒ©a</td><td>ƒê∆°n v·ªã nh·ªè nh·∫•t trong th·ª±c thi</td><td>Ch∆∞∆°ng tr√¨nh ƒëang ch·∫°y</td></tr>
      <tr><td>Kh√¥ng gian nh·ªõ</td><td>Chia s·∫ª b·ªô nh·ªõ v·ªõi thread kh√°c</td><td>Kh√¥ng gian nh·ªõ t√°ch bi·ªát</td></tr>
      <tr><td>T√†i nguy√™n</td><td>Chia s·∫ª file, heap</td><td>T√†i nguy√™n ri√™ng bi·ªát</td></tr>
      <tr><td>T·ªëc ƒë·ªô t·∫°o</td><td>Nhanh</td><td>Ch·∫≠m h∆°n</td></tr>
      <tr><td>Giao ti·∫øp</td><td>D·ªÖ (qua bi·∫øn d√πng chung)</td><td>C·∫ßn IPC (pipe, shm, socket...)</td></tr>
      <tr><td>T√°c ƒë·ªông l·ªói</td><td>C√≥ th·ªÉ ·∫£nh h∆∞·ªüng to√†n b·ªô process</td><td>Ch·ªâ ·∫£nh h∆∞·ªüng process ƒë√≥</td></tr>
      <tr><td>V√≠ d·ª• d√πng</td><td>Song song ho√° x·ª≠ l√Ω UI, logic</td><td>Ch·∫°y ch∆∞∆°ng tr√¨nh ƒë·ªôc l·∫≠p</td></tr>
    </table>
    <div class="note">
      ‚úÖ <strong>Khi n√†o d√πng thread?</strong>
      <ul>
        <li>Khi mu·ªën song song h√≥a n·ªôi b·ªô ·ª©ng d·ª•ng.</li>
        <li>Khi c·∫ßn chia s·∫ª b·ªô nh·ªõ, x·ª≠ l√Ω nhanh v√† nh·∫π.</li>
      </ul>
      ‚úÖ <strong>Khi n√†o d√πng process?</strong>
      <ul>
        <li>Khi c·∫ßn c√°ch ly ƒë·ªôc l·∫≠p gi·ªØa c√°c ph·∫ßn.</li>
        <li>Khi x·ª≠ l√Ω c√°c t√°c v·ª• l·ªõn, c·∫ßn ƒë·ªô ·ªïn ƒë·ªãnh cao ho·∫∑c crash-safe.</li>
      </ul>
    </div>
  </section>



    <p><a href="cpp-advance.html">‚Üê Quay l·∫°i C++ N√¢ng Cao</a></p>
  </main>
</body>

</html>